<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" th:href="@{/css/login.css}" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <title>Login</title>
  </head>
  <body>
    <div th:if="${error != null}" class="alert alert-danger" th:utext="co loi">
      error
    </div>
    <section class="h-100 gradient-form" style="background-color: #eee">
      <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-xl-6">
            <div class="card rounded-3 text-black">
              <div class="row g-0">
                <div class="col-lg-12">
                  <div class="card-body p-md-5 mx-md-4">
                    <div class="text-center">
                      <img
                        th:src="@{/img/logo-shop-red.png}"
                        style="width: 185px"
                        alt="logo"
                      />
                      <h4
                        class="mt-1 mb-5 pb-1"
                        style="font-variant: small-caps"
                      >
                        Change password
                      </h4>
                    </div>

                    <form
                      th:action="@{/account/change-password}"
                      id="form"
                      method="post"
                      th:onsubmit="return checkFormChangePassword()"
                    >
                      <div class="form-outline mb-4">
                        <input
                          type="password"
                          id="old-password"
                          class="form-control"
                          placeholder="Mật khẩu cũ"
                          name="oldPassword"
                        />
                        <label class="form-label" for="old-password"
                          >Mật khẩu cũ</label
                        >
                      </div>

                      <div class="form-outline mb-4">
                        <input
                          type="password"
                          id="new-password-1"
                          class="form-control"
                          placeholder="Mật khẩu mới"
                          name="newPassword1"
                        />
                        <label class="form-label" for="new-password">
                          Mật khẩu mới</label
                        >
                      </div>
                      <div class="form-outline mb-4">
                        <input
                          type="password"
                          id="new-password-2"
                          class="form-control"
                          placeholder="Mật khẩu mới"
                          name="newPassword2"
                        />
                        <label class="form-label" for="new-password"
                          >Nhập lại mật khẩu mới</label
                        >
                      </div>

                      <div id="errormsg" class="alert-danger"></div>
                      <div
                        id="server-errormsg"
                        th:if="${errormsg}"
                        class="alert-danger"
                      >
                        [[${errormsg}]]
                      </div>
                      <div class="text-center pt-1 mb-5 pb-1">
                        <button
                          class="btn btn-primary btn-block fa-lg mb-3"
                          type="submit"
                        >
                          Confirm
                        </button>
                        <a th:href="@{/trang-chu}"> Trang chủ </a>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
     <script type="text/javascript" th:src="@{/js/user/form-change-password.js}"></script>
    <script>
      /* let oldPassword = $("#old-password");
      let newPassword1 = $("#new-password-1");
      let newPassword2 = $("#new-password-2");
      let errorServer = $("#server-errormsg");

      function checkCooincident() {
        if (newPassword1.val() !== newPassword2.val()) {
          $("#errormsg").html("Mật khẩu không trùng khớp");
          errorServer.html("");
        } else $("#errormsg").html("");
      }

      function checkForm(errorMsg) {
        errorServer.html("");
        $("#errormsg").html(errorMsg);
      }

      $("#new-password-1").keyup(function () {
        checkCooincident();
      });

      $("#new-password-2").keyup(function () {
        checkCooincident();
      });

      function checkFormChangePassword() {
        if (!oldPassword.val() || !newPassword1.val() || !newPassword2.val()) {
          checkForm("Không đươc để trống");
          return false;
        }
        if (newPassword1.val() !== newPassword2.val()) {
          checkForm("Mật khẩu không trùng khớp");
          return false;
        }
        if (newPassword1.val().length < 8 || newPassword2.val().length < 8) {
          checkForm("Mật khẩu mới tối thiếu 8 ký tự");
          return false;
        }
        return true;
      } */
    </script>
  </body>
</html>
